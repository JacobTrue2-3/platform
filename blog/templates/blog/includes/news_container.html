<div class="news-card card border-0 overflow-hidden mb-4 
     {% if news_post.news_item.pinned %}news-pinned{% endif %}
     {% if news_post.news_item.is_important %}news-important{% endif %}">
  
  <!-- Верхний акцент для важных новостей -->
  {% if news_post.news_item.is_important %}
  <div class="important-top-line"></div>
  {% endif %}
  
  <!-- Линия для закрепленных -->
  {% if news_post.news_item.pinned %}
  <div class="pinned-top-line"></div>
  {% endif %}
  
  <div class="card-body p-4">
    <!-- Заголовок с иконкой темы -->
    <div class="d-flex align-items-center gap-2 mb-3">
      <span class="news-type-icon 
        {% if news_post.news_item.news_type == 'announcement' %}bg-primary
        {% elif news_post.news_item.news_type == 'update' %}bg-info
        {% elif news_post.news_item.news_type == 'event' %}bg-success
        {% elif news_post.news_item.news_type == 'maintenance' %}bg-warning{% endif %}">
        <i class="bi 
          {% if news_post.news_item.news_type == 'announcement' %}bi-megaphone
          {% elif news_post.news_item.news_type == 'update' %}bi-arrow-up-circle
          {% elif news_post.news_item.news_type == 'event' %}bi-calendar-event
          {% elif news_post.news_item.news_type == 'maintenance' %}bi-tools{% endif %}">
        </i>
      </span>
      <span class="fw-semibold 
        {% if news_post.news_item.news_type == 'announcement' %}text-primary
        {% elif news_post.news_item.news_type == 'update' %}text-info
        {% elif news_post.news_item.news_type == 'event' %}text-success
        {% elif news_post.news_item.news_type == 'maintenance' %}text-warning{% endif %}">
        {{ news_post.news_item.get_news_type_display }}
      </span>
      
      {% if news_post.news_item.is_important %}
      <span class="badge bg-danger ms-2">
        <i class="bi bi-exclamation-triangle-fill me-1"></i>ВАЖНО
      </span>
      {% endif %}
      
      {% if news_post.news_item.pinned %}
      <span class="badge bg-secondary ms-2">
        <i class="bi bi-pin-angle-fill me-1"></i>Закреплено
      </span>
      {% endif %}
      
      <small class="text-secondary ms-auto">
        <i class="bi bi-clock"></i>
        {{ news_post.created_at|date:"d.m.Y" }}
      </small>
    </div>

    <!-- Заголовок новости -->
    <h3 class="h4 fw-bold mb-3">
      <a href="{% url 'blog:post_detail' post_slug=news_post.slug %}" class="text-decoration-none text-dark">
        {{ news_post.title }}
      </a>
    </h3>

    <!-- Изображение (если есть) -->
    {% if news_post.image %}
    <div class="mb-4">
      <img src="{{ news_post.image.url }}" 
           alt="{{ news_post.title }}"
           style="width: 100%; max-height: 300px; object-fit: cover; border-radius: 12px;"
           class="border">
    </div>
    {% endif %}

    <!-- Текст -->
    <p class="text-secondary mb-4">
      {{ news_post.text|truncatechars:300 }}
    </p>

    <!-- Нижняя часть -->
    <div class="d-flex flex-wrap justify-content-between align-items-center pt-3 border-top">
      <div class="d-flex align-items-center gap-4">
        <span class="text-secondary">
          <i class="bi bi-person-circle me-1"></i>
          <a href="{% url 'users:profile' news_post.author.username %}" class="text-decoration-none">
            {{ news_post.author.username }}
          </a>
        </span>
        
        <span class="text-secondary">
          <i class="bi bi-eye me-1"></i>
          {{ news_post.views }}
        </span>
        
        <span class="text-secondary">
          <i class="bi bi-chat me-1"></i>
          {{ news_post.comments.count }}
        </span>
      </div>
      
      <a href="{% url 'blog:post_detail' post_slug=news_post.slug %}" 
         class="btn btn-primary btn-sm rounded-pill px-4">
        Читать <i class="bi bi-arrow-right ms-1"></i>
      </a>
    </div>
  </div>
</div>